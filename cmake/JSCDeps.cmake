if (SUPPORT_JSC)

if (UNIX AND NOT APPLE)
  add_definitions(-DUSE_GLIB=1)
  pkg_search_module(GLIB glib-2.0)
  pkg_search_module(JAVASCRIPTCORE wpe-javascriptcore)
  pkg_search_module(LIBUV libuv)
  if (NOT JAVASCRIPTCORE_FOUND)
    pkg_search_module(JAVASCRIPTCORE javascriptcoregtk-4.0)
  endif(NOT JAVASCRIPTCORE_FOUND)

  if (NOT JAVASCRIPTCORE_FOUND)
    set(SUPPORT_JSC OFF)
  else(NOT JAVASCRIPTCORE_FOUND)
    set(JAVASCRIPTCORE_INCLUDE_DIRS ${JAVASCRIPTCORE_INCLUDE_DIRS} ${GLIB_INCLUDE_DIRS})
    set(JAVASCRIPTCORE_LIBRARIES ${JAVASCRIPTCORE_LIBRARIES} ${GLIB_LIBRARIES})
  endif(NOT JAVASCRIPTCORE_FOUND)

  if (LIBUV_FOUND AND JAVASCRIPTCORE_FOUND)
    add_definitions(-DUSE_UV=1)
    set(JAVASCRIPTCORE_INCLUDE_DIRS ${JAVASCRIPTCORE_INCLUDE_DIRS} ${LIBUV_INCLUDE_DIRS})
    set(JAVASCRIPTCORE_LIBRARIES ${JAVASCRIPTCORE_LIBRARIES} ${LIBUV_LIBRARIES})
  endif(LIBUV_FOUND AND JAVASCRIPTCORE_FOUND)
elseif(APPLE)
  set(JAVASCRIPTCORE_LIBRARIES "-framework JavaScriptCore")
else()
  set(SUPPORT_JSC OFF)
endif()

endif(SUPPORT_JSC)

if (SUPPORT_JSC)
  message("JAVASCRIPTCORE INCLUDE DIRS: ${JAVASCRIPTCORE_INCLUDE_DIRS}")
endif(SUPPORT_JSC)
